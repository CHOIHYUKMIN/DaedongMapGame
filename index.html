<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ÎßêÎûëÎßêÎûë ?Ä?ôÎßõÏßÄ??/title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <link rel="stylesheet" href="css/style.css?v=1.3.0">
    <link rel="stylesheet" href="css/mobile.css?v=1.3.0">
    <link rel="stylesheet" href="css/blocks.css?v=1.3.0">
    <link rel="stylesheet" href="css/ui-enhancements.css?v=1.3.0">
    <link rel="stylesheet" href="css/animations.css?v=1.3.0">
    <link rel="stylesheet" href="css/costume.css?v=1.3.0">
</head>

<body>
    <!-- Î©îÏù∏ Ïª®ÌÖå?¥ÎÑà -->
    <div id="game-container">

        <!-- Î©îÏù∏ Î©îÎâ¥ ?îÎ©¥ -->
        <div id="main-menu" class="screen active">
            <div class="title">
                <h1>ÎßêÎûëÎßêÎûë<br>?Ä?ôÎßõÏßÄ??/h1>
                <p class="subtitle">?úÏö∏Í≤ΩÍ∏∞??/p>
            </div>
            <div class="map-selection-container">
                <h3 style="color: #F57C00; margin-bottom: 15px; text-align: center;">ÏßÄ??ùÑ ?†ÌÉù?òÏÑ∏??/h3>
                <div id="region-map" style="width: 100%; height: 400px; border-radius: 15px; overflow: hidden;"></div>
                <p style="text-align: center; color: #999; font-size: 12px; margin-top: 10px;">
                    ÏßÄ?ÑÏóê???úÏö∏???¥Î¶≠?òÏÑ∏??
                </p>
            </div>
            <div class="menu-buttons">
                <button class="btn-large" onclick="Game.showInfo()">Í≤åÏûÑ ?ïÎ≥¥</button>
                <button class="btn-large" onclick="Game.showSettings()">?§Ï†ï</button>
            </div>
            <div class="version">v0.1 ?ÑÎ°ú?†Ì???/div>
        </div>

        <!-- Ï∫êÎ¶≠???†ÌÉù ?îÎ©¥ -->
        <div id="character-select" class="screen">
            <h2>?êÌóòÍ∞Ä ?†ÌÉù</h2>
            <p class="subtitle">?òÏù¥?Ä ?±Î≥Ñ???†ÌÉù?òÏÑ∏??/p>

            <div class="age-selector">
                <button class="age-btn" data-age="10">10?Ä</button>
                <button class="age-btn" data-age="20">20?Ä</button>
                <button class="age-btn" data-age="30">30?Ä</button>
                <button class="age-btn" data-age="40">40~50?Ä</button>
                <button class="age-btn" data-age="60">60?Ä+</button>
            </div>

            <div class="gender-selector">
                <button class="gender-btn" data-gender="M">?®ÏÑ±</button>
                <button class="gender-btn" data-gender="F">?¨ÏÑ±</button>
            </div>

            <div id="selected-character" class="character-preview">
                <p>Ï∫êÎ¶≠?∞Î? ?†ÌÉù?¥Ï£º?∏Ïöî</p>
            </div>

            <div class="button-row">
                <button class="btn" onclick="Game.showMainMenu()">?§Î°ú</button>
                <button class="btn btn-primary" onclick="Game.startGame()">?úÏûë?òÍ∏∞</button>
            </div>
        </div>

        <!-- ÏßÄ???îÎ©¥ -->
        <div id="map-screen" class="screen">
            <div class="top-bar">
                <div class="resource-display">
                    <span class="resource">?í∞ <span id="gold-display">0</span></span>
                    <span class="resource">?é´ <span id="mp-display">0</span></span>
                    <span class="resource">?§Ô∏è <span id="heart-display">5</span></span>
                </div>
            </div>

            <div class="map-container">
                <div id="seoul-map" style="width: 100%; height: 100%;"></div>
            </div>

            <div class="bottom-bar">
                <button class="icon-btn" onclick="Game.showMap()">?ó∫Ô∏?ÏßÄ??/button>
                <button class="icon-btn" onclick="Game.showInventory()">?éí Í∞ÄÎ∞?/button>
                <button class="icon-btn" onclick="Game.showShop()">?è™ ?ÅÏ†ê</button>
                <button class="icon-btn" onclick="Game.showSettings()">?ôÔ∏è ?§Ï†ï</button>
            </div>
        </div>

        <!-- ?ºÏ¶ê Í≤åÏûÑ ?îÎ©¥ -->
        <div id="puzzle-screen" class="screen">
            <div class="puzzle-top-bar">
                <div id="level-info">?àÎ≤® 1</div>
                <div id="mission-info">Î™©Ìëú: <span id="target-score"></span>1000</span>??/div>
                <div id="score-info">?êÏàò: <span id="current-score">0</span>??/div>
                <div id="moves-info">?¥Îèô: <span id="moves-left">15</span></div>
            </div>

            <div id="puzzle-board"></div>

            <div class="puzzle-bottom-bar">
                <button class="booster-btn" id="hammer-btn" onclick="Puzzle.activateBooster('HAMMER')">
                    ?î® <span id="hammer-count">0</span>
                </button>
                <button class="booster-btn" id="bomb-btn" onclick="Puzzle.activateBooster('BOMB')">
                    ?í£ <span id="bomb-count">0</span>
                </button>
                <button class="booster-btn" id="rainbow-btn" onclick="Puzzle.activateBooster('RAINBOW')">
                    ?åà <span id="rainbow-count">0</span>
                </button>
                <button class="pause-btn" onclick="Game.pauseGame()">?∏Ô∏è</button>
            </div>
        </div>

        <!-- Í≤∞Í≥º ?ùÏóÖ -->
        <div id="result-popup" class="popup">
            <div class="popup-content">
                <h2 id="result-title">?àÎ≤® ?¥Î¶¨??</h2>
                <div id="result-stars">‚≠ê‚≠ê‚≠?/div>
                <p id="result-score">?êÏàò: 5000</p>
                <div id="result-rewards">
                    <p>Î≥¥ÏÉÅ:</p>
                    <ul id="reward-list"></ul>
                </div>
                <p id="next-level-msg" style="margin-top: 20px; color: #999; font-size: 14px;">
                    3Ï¥????§Ïùå ?àÎ≤®Î°??¥Îèô?©Îãà??..
                </p>
                <div class="button-row">
                    <button class="btn" onclick="Game.showMap()">ÏßÄ?ÑÎ°ú</button>
                    <button class="btn btn-primary" onclick="Game.retryLevel()">?¨ÎèÑ??/button>
                </div>
            </div>
        </div>

        <!-- ?∏Î≤§?†Î¶¨ ?ùÏóÖ -->
        <div id="inventory-popup" class="popup">
            <div class="popup-content inventory-content">
                <h2>?éí ?∏Î≤§?†Î¶¨</h2>

                <!-- Ï∫êÎ¶≠???ïÎ≥¥ -->
                <div class="character-info">
                    <div class="character-avatar" id="inventory-avatar">?ë§</div>
                    <div class="character-details">
                        <h3 id="inventory-char-name">Ï∫êÎ¶≠???¥Î¶Ñ</h3>
                        <p id="inventory-char-desc">Ï∫êÎ¶≠???§Î™Ö</p>
                        <div class="character-skill">
                            <span>?åü</span>
                            <span id="inventory-char-skill">?§ÌÇ¨</span>
                        </div>
                    </div>
                </div>

                <!-- ?ÑÏù¥??Î™©Î°ù -->
                <div class="inventory-items">
                    <h3>Î≥¥Ïú† ?ÑÏù¥??/h3>
                    <div id="inventory-grid" class="item-grid">
                        <!-- ?ÑÏù¥?úÎì§???¨Í∏∞ ?úÏãú??-->
                    </div>
                </div>

                <!-- Î≤ÑÌäº -->
                <div class="button-row">
                    <button class="btn" onclick="Game.closeInventory()">?´Í∏∞</button>
                    <button class="btn" onclick="CostumeUI.open()">?é® Ï∫êÎ¶≠??Íæ∏Î?Í∏?/button>
                    <button class="btn btn-primary" onclick="Game.showCrafting()">Ï°∞Ìï©?òÍ∏∞</button>
                </div>
            </div>
        </div>

        <!-- Ï°∞Ìï© ?ùÏóÖ -->
        <div id="crafting-popup" class="popup">
            <div class="popup-content crafting-content">
                <h2>?î® ?ÑÏù¥??Ï°∞Ìï©</h2>

                <!-- ?àÏãú??Î™©Î°ù -->
                <div class="recipe-list">
                    <h3>Ï°∞Ìï©Î≤?/h3>
                    <div id="recipe-grid"></div>
                </div>

                <!-- ?†ÌÉù???àÏãú???ïÎ≥¥ -->
                <div id="selected-recipe" class="selected-recipe">
                    <p style="text-align: center; color: #999;">?àÏãú?ºÎ? ?†ÌÉù?òÏÑ∏??/p>
                </div>

                <!-- Î≤ÑÌäº -->
                <div class="button-row">
                    <button class="btn" onclick="Game.closeCrafting()">?´Í∏∞</button>
                    <button class="btn btn-primary" id="craft-btn" onclick="Game.executeCraft()" disabled>Ï°∞Ìï©?òÍ∏∞</button>
                </div>
            </div>
        </div>

        <!-- ÏΩîÏä§??Ïª§Ïä§?∞Îßà?¥Ïßï ?îÎ©¥ -->
        <div id="costume-screen" class="screen">
            <h2>?é® Ï∫êÎ¶≠??Íæ∏Î?Í∏?/h2>

            <!-- Ï∫êÎ¶≠???ÑÎ¶¨Î∑?-->
            <div class="costume-preview-container">
                <canvas id="costume-preview-canvas" width="512" height="512"></canvas>
            </div>

            <!-- ?§ÌÉØ Î≥¥ÎÑà???îÏïΩ -->
            <div class="stat-bonus-summary">
                <h3>???ÑÏû¨ ÏΩîÏä§??Î≥¥ÎÑà??/h3>
                <div class="stat-bonus-list" id="stat-bonus-list">
                    <!-- Î≥¥ÎÑà????™©?§Ïù¥ ?¨Í∏∞ ?úÏãú??-->
                </div>
            </div>

            <!-- Ïπ¥ÌÖåÍ≥†Î¶¨ ??-->
            <div class="costume-category-tabs">
                <button class="costume-tab active" data-category="heads" onclick="CostumeUI.showCategory('heads')">?ß¢
                    Î™®Ïûê</button>
                <button class="costume-tab" data-category="tops" onclick="CostumeUI.showCategory('tops')">?ëï ?ÅÏùò</button>
                <button class="costume-tab" data-category="bottoms" onclick="CostumeUI.showCategory('bottoms')">?ëñ
                    ?òÏùò</button>
                <button class="costume-tab" data-category="bags" onclick="CostumeUI.showCategory('bags')">?éí Í∞ÄÎ∞?/button>
                <button class="costume-tab" data-category="accessories"
                    onclick="CostumeUI.showCategory('accessories')">?ï∂Ô∏??°ÏÑ∏?úÎ¶¨</button>
                <button class="costume-tab" data-category="special" onclick="CostumeUI.showCategory('special')">??
                    ?πÏàò</button>
            </div>

            <!-- ÏΩîÏä§??Í∑∏Î¶¨??-->
            <div id="costume-grid" class="costume-grid">
                <!-- ÏΩîÏä§???ÑÏù¥?úÎì§???¨Í∏∞ ?úÏãú??-->
            </div>

            <!-- Î≤ÑÌäº -->
            <div class="button-row">
                <button class="btn" onclick="Game.showInventory()">?§Î°ú</button>
                <button class="btn btn-primary" onclick="CostumeUI.saveAndClose()">?Ä??/button>
            </div>
        </div>

        <!-- ÏΩîÏä§???ÅÏÑ∏ Î™®Îã¨ -->
        <div id="costume-detail-modal" class="costume-detail-modal">
            <div class="costume-detail-content">
                <div class="costume-detail-icon" id="detail-icon">
                    <!-- ÏΩîÏä§???ÑÏù¥ÏΩ?-->
                </div>
                <h3 class="costume-detail-name" id="detail-name">ÏΩîÏä§???¥Î¶Ñ</h3>
                <p class="costume-detail-description" id="detail-description">ÏΩîÏä§???§Î™Ö</p>

                <div class="costume-detail-stats" id="detail-stats">
                    <!-- ?§ÌÉØ ?ïÎ≥¥ -->
                </div>

                <div class="costume-unlock-info" id="detail-unlock" style="display: none;">
                    <!-- ?†Í∏à ?¥Ï†ú Ï°∞Í±¥ -->
                </div>

                <div class="button-row">
                    <button class="btn" onclick="CostumeUI.closeDetail()">?´Í∏∞</button>
                    <button class="btn btn-primary" id="detail-equip-btn"
                        onclick="CostumeUI.equipFromDetail()">?•Ï∞©</button>
                </div>
            </div>
        </div>

    </div>

    <!-- JavaScript -->
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Version Info -->
    <script src="version.js?v=1.3.0"></script>

    <script src="js/data.js?v=1.3.0"></script>
    <script src="js/puzzle.js?v=1.3.0"></script>
    <script src="js/costume.js?v=1.3.0"></script>
    <script src="js/costume-ui.js?v=1.3.0"></script>
    <script src="js/game.js?v=1.3.0"></script>
</body>

</html>