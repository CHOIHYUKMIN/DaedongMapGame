/* ===== 캔디크러시 스타일 블록 디자인 ===== */

/* 기본 블록 스타일 개선 */
.block {
    aspect-ratio: 1;
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
    animation: blockAppearNew 0.4s ease-out;

    /* 3D 효과 */
    box-shadow:
        0 4px 0 rgba(0, 0, 0, 0.2),
        0 6px 12px rgba(0, 0, 0, 0.15),
        inset 0 -2px 5px rgba(0, 0, 0, 0.1),
        inset 0 2px 5px rgba(255, 255, 255, 0.5);

    /* 광택 효과 */
    background-image: linear-gradient(to bottom,
            rgba(255, 255, 255, 0.4) 0%,
            rgba(255, 255, 255, 0.2) 40%,
            rgba(255, 255, 255, 0) 60%,
            rgba(0, 0, 0, 0.1) 100%);

    /* 텍스트 그림자 */
    text-shadow:
        0 2px 4px rgba(0, 0, 0, 0.3),
        0 1px 0 rgba(255, 255, 255, 0.5);
}

/* 블록 등장 애니메이션 개선 */
@keyframes blockAppearNew {
    0% {
        opacity: 0;
        transform: scale(0) rotate(180deg);
    }

    60% {
        transform: scale(1.1) rotate(-10deg);
    }

    100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
    }
}

/* 호버 효과 강화 */
.block:hover {
    transform: scale(1.08) translateY(-2px);
    box-shadow:
        0 6px 0 rgba(0, 0, 0, 0.25),
        0 8px 16px rgba(0, 0, 0, 0.2),
        inset 0 -2px 5px rgba(0, 0, 0, 0.1),
        inset 0 3px 8px rgba(255, 255, 255, 0.6);
}

.block:active {
    transform: scale(0.95) translateY(2px);
    box-shadow:
        0 2px 0 rgba(0, 0, 0, 0.2),
        0 4px 8px rgba(0, 0, 0, 0.15);
}

/* 선택된 블록 */
.block.selected {
    transform: scale(1.15) rotate(5deg);
    box-shadow:
        0 0 0 4px rgba(255, 255, 255, 0.9),
        0 0 20px rgba(255, 215, 0, 0.8),
        0 8px 0 rgba(0, 0, 0, 0.3);
    animation: pulseGlow 0.6s ease-in-out infinite;
    z-index: 10;
}

@keyframes pulseGlow {

    0%,
    100% {
        box-shadow:
            0 0 0 4px rgba(255, 255, 255, 0.9),
            0 0 20px rgba(255, 215, 0, 0.8),
            0 8px 0 rgba(0, 0, 0, 0.3);
    }

    50% {
        box-shadow:
            0 0 0 6px rgba(255, 255, 255, 1),
            0 0 30px rgba(255, 215, 0, 1),
            0 8px 0 rgba(0, 0, 0, 0.3);
    }
}

/* ===== 블록 타입별 색상 개선 (캔디크러시 스타일) ===== */

/* 타입 0 - 핑크 (딸기 캔디) */
.block-0 {
    background: linear-gradient(135deg,
            #FF85B3 0%,
            #FF69B4 50%,
            #FF1493 100%);
}

/* 타입 1 - 골드 (레몬 캔디) */
.block-1 {
    background: linear-gradient(135deg,
            #FFE97F 0%,
            #FFD700 50%,
            #FFA500 100%);
}

/* 타입 2 - 블루 (민트 캔디) */
.block-2 {
    background: linear-gradient(135deg,
            #87CEEB 0%,
            #4682B4 50%,
            #1E90FF 100%);
}

/* 타입 3 - 그린 (라임 캔디) */
.block-3 {
    background: linear-gradient(135deg,
            #90EE90 0%,
            #32CD32 50%,
            #228B22 100%);
}

/* 타입 4 - 퍼플 (포도 캔디) */
.block-4 {
    background: linear-gradient(135deg,
            #DDA0DD 0%,
            #9370DB 50%,
            #8B008B 100%);
}

/* ===== 특수 블록 디자인 강화 ===== */

/* 가로 줄 제거 - 번개 효과 */
.block-special-row {
    background: linear-gradient(135deg,
            #FFE97F 0%,
            #FFD700 30%,
            #FFAA00 70%,
            #FF8C00 100%);
    box-shadow:
        0 0 0 3px #FFF,
        0 0 20px rgba(255, 215, 0, 0.9),
        0 6px 0 rgba(0, 0, 0, 0.3),
        inset 0 2px 8px rgba(255, 255, 255, 0.6);
    animation: sparkleRow 1.2s ease-in-out infinite;
    font-size: 36px;
    position: relative;
}

.block-special-row::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg,
            transparent 0%,
            rgba(255, 255, 255, 0.6) 50%,
            transparent 100%);
    animation: shimmer 1.5s infinite;
}

@keyframes sparkleRow {

    0%,
    100% {
        box-shadow:
            0 0 0 3px #FFF,
            0 0 20px rgba(255, 215, 0, 0.9),
            0 6px 0 rgba(0, 0, 0, 0.3);
    }

    50% {
        box-shadow:
            0 0 0 3px #FFF,
            0 0 30px rgba(255, 215, 0, 1),
            0 6px 0 rgba(0, 0, 0, 0.3);
    }
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%);
    }

    100% {
        transform: translateX(100%);
    }
}

/* 세로 줄 제거 - 폭발 효과 */
.block-special-column {
    background: linear-gradient(135deg,
            #FF6B6B 0%,
            #FF4500 30%,
            #DC143C 70%,
            #B22222 100%);
    box-shadow:
        0 0 0 3px #FFF,
        0 0 20px rgba(255, 69, 0, 0.9),
        0 6px 0 rgba(0, 0, 0, 0.3);
    animation: sparkleColumn 1s ease-in-out infinite;
    font-size: 36px;
}

@keyframes sparkleColumn {

    0%,
    100% {
        box-shadow:
            0 0 0 3px #FFF,
            0 0 20px rgba(255, 69, 0, 0.9),
            0 6px 0 rgba(0, 0, 0, 0.3);
    }

    50% {
        box-shadow:
            0 0 0 3px #FFF,
            0 0 30px rgba(255, 69, 0, 1),
            0 6px 0 rgba(0, 0, 0, 0.3);
    }
}

/* 십자 제거 - 스타 효과 */
.block-special-cross {
    background: linear-gradient(135deg,
            #E6B3FF 0%,
            #9370DB 30%,
            #6A00FF 70%,
            #4B0082 100%);
    box-shadow:
        0 0 0 4px #FFF,
        0 0 25px rgba(147, 112, 219, 1),
        0 6px 0 rgba(0, 0, 0, 0.3);
    animation: crossRotate 1.5s ease-in-out infinite;
    font-size: 40px;
}

@keyframes crossRotate {

    0%,
    100% {
        transform: scale(1) rotate(0deg);
        box-shadow:
            0 0 0 4px #FFF,
            0 0 25px rgba(147, 112, 219, 1),
            0 6px 0 rgba(0, 0, 0, 0.3);
    }

    50% {
        transform: scale(1.08) rotate(90deg);
        box-shadow:
            0 0 0 4px #FFF,
            0 0 35px rgba(147, 112, 219, 1),
            0 6px 0 rgba(0, 0, 0, 0.3);
    }
}

/* 3x3 폭탄 - 다이나마이트 효과 */
.block-special-bomb {
    background: linear-gradient(135deg,
            #FF6B6B 0%,
            #FF4500 20%,
            #8B0000 50%,
            #000000 100%);
    box-shadow:
        0 0 0 4px rgba(255, 100, 0, 0.8),
        0 0 25px rgba(255, 69, 0, 1),
        0 6px 0 rgba(0, 0, 0, 0.4);
    animation: bombPulseNew 0.8s ease-in-out infinite;
    font-size: 40px;
}

@keyframes bombPulseNew {

    0%,
    100% {
        transform: scale(1);
        box-shadow:
            0 0 0 4px rgba(255, 100, 0, 0.8),
            0 0 25px rgba(255, 69, 0, 1),
            0 6px 0 rgba(0, 0, 0, 0.4);
    }

    50% {
        transform: scale(1.12);
        box-shadow:
            0 0 0 4px rgba(255, 100, 0, 1),
            0 0 35px rgba(255, 69, 0, 1),
            0 6px 0 rgba(0, 0, 0, 0.4);
    }
}

/* 레인보우 - 무지개 효과 */
.block-special-rainbow {
    background: linear-gradient(135deg,
            #FF6B9D 0%,
            #FF8C00 16.66%,
            #FFD700 33.33%,
            #32CD32 50%,
            #4682B4 66.66%,
            #9370DB 83.33%,
            #FF69B4 100%);
    box-shadow:
        0 0 0 5px #FFF,
        0 0 30px rgba(255, 215, 0, 1),
        0 6px 0 rgba(0, 0, 0, 0.4);
    animation: rainbowSpinNew 2s linear infinite;
    font-size: 42px;
}

@keyframes rainbowSpinNew {
    0% {
        filter: hue-rotate(0deg) brightness(1.1);
        transform: scale(1) rotate(0deg);
    }

    50% {
        transform: scale(1.1) rotate(180deg);
    }

    100% {
        filter: hue-rotate(360deg) brightness(1.1);
        transform: scale(1) rotate(360deg);
    }
}

/* ===== 폭발 애니메이션 개선 ===== */
.block.exploding {
    animation: explodeNew 0.6s ease-out forwards;
}

@keyframes explodeNew {
    0% {
        transform: scale(1);
        opacity: 1;
    }

    30% {
        transform: scale(1.3);
        opacity: 0.8;
    }

    60% {
        transform: scale(1.6) rotate(180deg);
        opacity: 0.4;
    }

    100% {
        transform: scale(0) rotate(360deg);
        opacity: 0;
    }
}

/* ===== 파티클 효과 개선 ===== */
.particle {
    position: absolute;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    pointer-events: none;
    animation: particleFloatNew 1s ease-out forwards;
    z-index: 1000;
    box-shadow:
        0 0 8px rgba(255, 255, 255, 0.8),
        inset 0 2px 4px rgba(255, 255, 255, 0.5);
}

@keyframes particleFloatNew {
    0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }

    50% {
        opacity: 0.8;
        transform: translate(var(--tx), calc(var(--ty) * 0.5)) scale(1.2);
    }

    100% {
        transform: translate(var(--tx), var(--ty)) scale(0);
        opacity: 0;
    }
}

/* ===== 모바일 최적화 ===== */
@media (max-width: 480px) {
    .block {
        font-size: 22px;
        border-radius: 12px;
        box-shadow:
            0 3px 0 rgba(0, 0, 0, 0.2),
            0 4px 8px rgba(0, 0, 0, 0.15);
    }

    .block-special-row,
    .block-special-column,
    .block-special-cross,
    .block-special-bomb,
    .block-special-rainbow {
        font-size: 28px;
    }
}

@media (max-width: 360px) {
    .block {
        font-size: 18px;
        border-radius: 10px;
    }

    .block-special-row,
    .block-special-column,
    .block-special-cross,
    .block-special-bomb,
    .block-special-rainbow {
        font-size: 24px;
    }
}